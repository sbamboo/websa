<head>
  <link rel="stylesheet" href="./index.css">
</head>

<div id="sidebar">
  <ul id="filetree">
  </ul>
</div>

<script>
function buildFileTree(jsonData, parent) {
  var ul = document.createElement('ul');
  parent.appendChild(ul);

  for (var key in jsonData) {
    var value = jsonData[key];

    if (typeof value === 'object') {
      // Folder
      var li = document.createElement('li');
      var a = document.createElement('a');
      a.textContent = key;
      li.appendChild(a);
      ul.appendChild(li);
      li.classList.add('closed'); // add 'closed' class to folder li by default

      // Add expand/collapse functionality
      a.addEventListener('click', function() {
        this.parentElement.classList.toggle('open');
        this.parentElement.classList.toggle('closed');
      });

      buildFileTree(value, li);
    } else {
      // File
      var li = document.createElement('li');
      var a = document.createElement('a');
      a.textContent = key;
      a.href = value;
      a.target = '_blank';
      li.appendChild(a);
      ul.appendChild(li);

      // Add click event listener to files to redirect to the URL
      a.addEventListener('click', function(e) {
        e.preventDefault();
        window.location.href = this.href;
      });
    }

    // Add click event listener to folders to render the sidebar
    if (typeof value === 'object') {
      a.addEventListener('click', function(e) {
        e.preventDefault();
        var parentLi = this.parentElement;
        if (parentLi.classList.contains('closed')) {
          parentLi.classList.remove('closed');
          parentLi.classList.add('open');
        }
        renderSidebar(value);
      });
    }
  }
}


</script>