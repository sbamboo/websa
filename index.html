<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="./index.css">
    </head>
    <body>
        <h1>Websa: WebInformationAndAssets</h1>
        <button onclick="location.href='./crosshell/docs/index.html'">Crosshell</button>
        <button onclick="location.href='./docview/index.html'">DocView</button>
        <button onclick="location.href='./jsonview/index.html'">JsonView</button>
        
        <!--LINK SHORTENER-->
        <script>
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            var id = urlParams.get('id')
            const context = urlParams.get('context')
            var loadNoMatterContext = true;

            // Lists
            shorteners = {
                // TheAxolot77 Java Resourcepack Information
                "TheAxolot77_Java_Rsp_Info": {
                    "type": "id->placeholder",
                    "mapping": {
                        "01":"3.0",
                        "02":"3.1",
                        "03":"3.2",
                        "04":"3.3",
                        "05":"3.4",
                        "06":"3.5",
                        "07":"3.6",
                        "08":"3.7",
                        "09":"3.8",
                        "10":"3.9",
                        "11":"3.11", //Note: Bump
                        "12":"3.12",
                        "14":"3.14",
                        "15":"4.0a1/4.0a1"
                    },
                    "url": "https://raw.githubusercontent.com/sbamboo/serverpacks/main/The%20Axolot%2077/<idstr>_info.txt",
                    "placeholder": "<idstr>"
                },
                // TheAxolot77 Bedrock Resourcepack Information
                "TheAxolot77_Bedrock_Rsp_Info": {
                    "type": "id->placeholder",
                    "mapping": {
                        "01b":"1.0"
                    },
                    "url": "https://raw.githubusercontent.com/sbamboo/serverpacks/main/The%20Axolot%2077/bedrock_<idstr>_info.txt",
                    "placeholder": "<idstr>"
                },
                // TheAxolot77 Java Resourcepack Information (Unstable)
                "TheAxolot77_Java_Unstable_Rsp_Info": {
                    "type": "id->placeholder",
                    "mapping": {
                        "13p1":"3.13p1",
                        "13p2":"3.13p2",
                        "13p3":"3.13p3"
                    },
                    "url": "https://raw.githubusercontent.com/sbamboo/serverpacks/main/The%20Axolot%2077/<idstr>_info.txt",
                    "placeholder": "<idstr>"
                }
            };
                
            // Redirects (Forcing)
            redirects = {
                "13": "3.13p3",
                "lt": "15"
            };

            if (Object.keys(redirects).includes(id)) {
                id = redirects[id];
            }

            if (context != null && context != undefined && Object.keys(shorteners).includes(context)) {
                data = shorteners[context];
                if (data["type"] == "id->placeholder") {
                    if (Object.keys(data["mapping"]).includes(id)) {
                        loadNoMatterContext = false;
                        constructUrl = data["url"].replace(data["placeholder"],data["mapping"][id]);
                        window.location = constructUrl;
                    }
                } else if (data["type"] == "id->url") {
                    if (Object.keys(data["mapping"]).includes(id)) {
                        loadNoMatterContext = false;
                        constructUrl = data["mapping"][id];
                        window.location = constructUrl;
                    }
                }
            }

            if (loadNoMatterContext == true) {
                reArrangedData = {};
                for (const contextKey in shorteners) {
                    data = shorteners[contextKey];
                    for (const idKey in data["mapping"]) {
                        idvalue = data["mapping"][idKey];
                        if (data["type"] == "id->placeholder") {
                            reArrangedData[idKey] = data["url"].replace(data["placeholder"],data["mapping"][idKey]);
                        } else if (data["type"] == "id->url") {
                            reArrangedData[idKey] = data["mapping"][idKey];
                        }
                    }
                }
                if (Object.keys(reArrangedData).includes(id)) {
                    window.location = reArrangedData[id];
                }
            }

        </script>
        <!--END OF LINK SHORTENER-->

    </body>
</html>